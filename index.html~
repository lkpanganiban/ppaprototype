<html>
<head>

<title>PPA Web App</title>
<link rel='stylesheet' href='lib/leaflet/leaflet.css' />
<link rel='stylesheet' href='lib/bootstrap/css/bootstrap.css' />
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />

<script src='lib/leaflet/leaflet.js'></script>
<script src='lib/jquery-1.11.3.min.js'></script>
<script src='lib/bootstrap/js/bootstrap.min.js'></script>

<!--Leaflet Plugins-->
<link rel='stylesheet' href='lib/leaflet-measure/dist/leaflet-measure.css' />
<script src='lib/leaflet-measure/dist/leaflet-measure.js'></script>

<link rel='stylesheet' href='lib/leaflet-zoombox/L.Control.ZoomBox.css' />
<script src='lib/leaflet-zoombox/L.Control.ZoomBox.min.js'></script>
<style>
 #map { height: 500px; }
</style>

</head>

<body>
<div id='map'></div>
</body>

<script>
var map = L.map('map').setView([14.121, 121.5482], 5);

//add osm layer to the map
L.tileLayer('http://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 14,
    minZoom: 3
}).addTo(map);

//add measure control plugin
var measurecontrol = L.control.measure().addTo(map); 

//add zoombox control plugin
var control = L.control.zoomBox({
    modal: true,  // If false (default), it deactivates after each use.  
                  // If true, zoomBox control stays active until you click on the control to deactivate.
    // position: "topleft",                  
    // className: "customClass"  // Class to use to provide icon instead of Font Awesome
});
map.addControl(control);


//get base ports data from ppa api
var baseportdata; 
$.ajax({
  url: 'http://geospatialapi-lkpanganiban.rhcloud.com/ppaapi/baseports/',
  dataType: 'json',
  async: false,
  success: function(data) {
	baseportdata = data;
  }
});

//add base ports data to the map with popup information
var basepoint = L.geoJson(baseportdata, {
	onEachFeature: function(feature, layer){
		layer.bindPopup(feature.properties.name + "<br>Latitude: " + feature.geometry.coordinates[0].toFixed(5) + "<br>Longitude:" + feature.geometry.coordinates[1].toFixed(5) + '<br><a href="http://localhost:8000/'+feature.properties.name.toLowerCase()+'.html">Go to this Port</a>');
	}
}).addTo(map);

</script>
</html>
